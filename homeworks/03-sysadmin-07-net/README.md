# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

*Linux:*
ip l
```
vagrant@vagrant:~$ ip l
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:a2:6b:fd brd ff:ff:ff:ff:ff:ff
```

*Windows:*
```
C:\Users\user>ipconfig

Настройка протокола IP для Windows


Неизвестный адаптер Подключение по локальной сети:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :

Адаптер Ethernet Ethernet:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :

Неизвестный адаптер Подключение по локальной сети 3:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :

Адаптер Ethernet Ethernet 5:

   DNS-суффикс подключения . . . . . :
   Локальный IPv6-адрес канала . . . : fe80::4ddb:ba28:8970:ad34%17
   IPv4-адрес. . . . . . . . . . . . : 192.168.56.1
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . :

Адаптер Ethernet Ethernet 6:

   DNS-суффикс подключения . . . . . :
   Локальный IPv6-адрес канала . . . : fe80::ede2:7c1:aa63:b04e%19
   IPv4-адрес. . . . . . . . . . . . : 192.168.55.1
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . :
```


2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

*Протокол `LLDP`. Пакет `lldpd`*

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

*Для этого используется технология VLAN (Virtual Local Area Network). Для настройки и управленя используется утилита `vconfig` из пакета `vlan`.*

sudo vconfig add eth0 100
sudo ip link add link eth0 name eth0.100 type vlan id 100

```
sudo su -c 'echo "8021q" >> /etc/modules'
vim /etc/network/interfaces
auto eth0.100
iface eth0.100 inet static
    address 192.168.1.1
    netmask 255.255.255.0
    vlan-raw-device eth0
```


4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
*Агрегация сетевых интерфейсов в линукс- bonding, это объединение сетевых интерфейсов, служит для увеличения пропускной способности и/или отказоустойчивость сети.
Типы агрегации интерфейсов в Linux:*

*Mode-0(balance-rr) – обеспечивается балансировку нагрузки и отказоустойчивость. 
Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем. 
Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов.
Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость.
Mode-4(802.3ad) – динамическое объединение одинаковых портов.
Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. 
Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5).* 

*Пример настройки интерфейсов eth0 и eth1 в режиме active-backup в файле «/etc/network/interfaces»:*
```
auto bond0
iface bond0 inet dhcp
   bond-slaves eth0 eth1
   bond-mode active-backup
   bond-miimon 100
   bond-primary eth0 eth1
```

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

*В сети /29 8 адресов, из них для хостов 8.
Из ети с маской /24 можно получить 32 сети с маской /29.
Примеры подсете 10.10.10.0/29, 10.10.10.8/29, 10.10.10.16/29, 10.10.10.0/29.*

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

*Можно использовать частную подсеть 100.64.0.0 — 100.127.255.255. Маску можно использовать либо /27 на 30 хостов, либо /26 на 62 хоста.*

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?


```
arp -a                          выводит содержимое таблицы ARP.
arp -d <host>                   удаляет запись, соответствующую хосту.
arp -d -a                       удаляет все записи таблицы.
```
